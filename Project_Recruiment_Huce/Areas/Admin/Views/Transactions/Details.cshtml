@model Project_Recruiment_Huce.Areas.Admin.Models.SePayTransactionVm
@using Project_Recruiment_Huce.Areas.Admin.Models
@Html.Partial("~/Areas/Admin/Views/Shared/_Breadcrumbs.cshtml")

<div class="row">
  <div class="col-md-8">
    <div class="card">
      <div class="card-header"><h5 class="card-title">Chi tiết giao dịch SePay</h5></div>
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Mã giao dịch</div>
          <div class="col-8"><code>@Model.TransactionNo</code></div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Gateway</div>
          <div class="col-8"><span class="badge bg-info">@(Model.Gateway ?? "N/A")</span></div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Số tài khoản</div>
          <div class="col-8">@(Model.AccountNumber ?? "N/A")</div>
        </div>
        @if (!string.IsNullOrEmpty(Model.SubAccount))
        {
          <div class="row mb-3">
            <div class="col-4 text-secondary font-weight-bold">Sub Account</div>
            <div class="col-8">@Model.SubAccount</div>
          </div>
        }
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Tiền vào</div>
          <div class="col-8">
            @if (Model.AmountIn > 0)
            {
              <span class="text-success font-weight-bold h5">+@AdminUiHelpers.FormatMoney(Model.AmountIn) đ</span>
            }
            else
            {
              <span class="text-muted">0 đ</span>
            }
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Tiền ra</div>
          <div class="col-8">
            @if (Model.AmountOut > 0)
            {
              <span class="text-danger font-weight-bold h5">-@AdminUiHelpers.FormatMoney(Model.AmountOut) đ</span>
            }
            else
            {
              <span class="text-muted">0 đ</span>
            }
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Số dư tích lũy</div>
          <div class="col-8"><strong>@AdminUiHelpers.FormatMoney(Model.Accumulated) đ</strong></div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Mã tham chiếu</div>
          <div class="col-8">@(Model.ReferenceCode ?? "-")</div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Mã code</div>
          <div class="col-8">@(Model.Code ?? "-")</div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Nội dung giao dịch</div>
          <div class="col-8">
            <div class="alert alert-info mb-0">
              @(Model.TransactionContent ?? "Không có nội dung")
            </div>
          </div>
        </div>
        @if (!string.IsNullOrEmpty(Model.Description))
        {
          <div class="row mb-3">
            <div class="col-4 text-secondary font-weight-bold">Mô tả</div>
            <div class="col-8">@Model.Description</div>
          </div>
        }
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Trạng thái</div>
          <div class="col-8">@Html.Partial("~/Areas/Admin/Views/Shared/_StatusBadge.cshtml", System.Tuple.Create(Model.Status, "Transactions"))</div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Thời gian giao dịch</div>
          <div class="col-8"><strong>@Model.TransactionDate.ToString("dd/MM/yyyy HH:mm:ss")</strong></div>
        </div>
        <div class="row mb-3">
          <div class="col-4 text-secondary font-weight-bold">Ngày tạo</div>
          <div class="col-8">@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm:ss")</div>
        </div>
      </div>
      <div class="card-footer">
        <a href="@Url.Action("Index")" class="btn btn-secondary"><i class="fa fa-arrow-left"></i> Quay lại</a>
        <button type="button" class="btn btn-success" onclick="exportToExcel()"><i class="fa fa-file-excel"></i> Xuất Excel</button>
        <button type="button" class="btn btn-danger" onclick="printPDF()"><i class="fa fa-file-pdf"></i> In PDF</button>
      </div>
    </div>

    <script>
    function exportToExcel() {
      alert('Tính năng xuất Excel đang được phát triển');
      // TODO: Implement Excel export functionality
    }
    
    function printPDF() {
      window.print();
    }
    </script>
  </div>
  <div class="col-md-4">
    <div class="card">
      <div class="card-header"><h6 class="card-title mb-0">Thông tin bổ sung</h6></div>
      <div class="card-body">
        <ul class="list-unstyled">
          <li class="mb-2"><i class="fa fa-database text-info"></i> <strong>ID:</strong> #@Model.Id</li>
          <li class="mb-2">
            <i class="fa fa-exchange-alt text-primary"></i> 
            <strong>Loại:</strong> 
            @if (Model.AmountIn > 0)
            {
              <span class="badge badge-success">Tiền vào</span>
            }
            else if (Model.AmountOut > 0)
            {
              <span class="badge badge-warning">Tiền ra</span>
            }
          </li>
          <li class="mb-2">
            <i class="fa fa-wallet text-success"></i> 
            <strong>Số tiền:</strong> 
            @AdminUiHelpers.FormatMoney(Model.Amount) đ
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


