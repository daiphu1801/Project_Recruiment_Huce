@model Project_Recruiment_Huce.Models.Accounts.LoginViewModel
@{
    Layout = "~/Areas/Admin/Views/Shared/_AuthLayout.cshtml";
    ViewBag.Title = "Đăng nhập";
}

<div class="card auth-card shadow-lg">
  <div class="auth-header">
    <h3 class="mb-2"><i class="bi bi-shield-lock-fill"></i> Đăng nhập Quản trị</h3>
    <p class="mb-0 opacity-75">Vui lòng đăng nhập để tiếp tục</p>
  </div>
  <div class="auth-body">
    @using (Html.BeginForm("Login", "Auth", new { area = "Admin", returnUrl = ViewBag.ReturnUrl }, FormMethod.Post))
    {
      @Html.AntiForgeryToken()
      @Html.ValidationSummary(true, null, new { @class = "alert alert-danger" })
      <div class="mb-3">
        <label class="form-label">Email hoặc Tên đăng nhập</label>
        <div class="input-group">
          <span class="input-group-text"><i class="bi bi-envelope"></i></span>
          @Html.TextBoxFor(m => m.EmailOrUsername, new { @class = "form-control", placeholder = "Email hoặc Tên đăng nhập", required = "required" })
        </div>
        @Html.ValidationMessageFor(m => m.EmailOrUsername, "", new { @class = "text-danger small" })
      </div>
      <div class="mb-3">
        <label class="form-label">Mật khẩu</label>
        <div class="input-group" style="position: relative;">
          <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
          @Html.PasswordFor(m => m.Password, new { @class = "form-control", placeholder = "Mật khẩu", required = "required", id = "Password", style = "padding-right: 40px;" })
          <span class="password-toggle-icon icon-eye" onclick="togglePassword('Password', this)" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 16px; color: #666; user-select: none; z-index: 10;"></span>
        </div>
        @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger small" })
      </div>
      <div class="mb-3 form-check">
        @Html.CheckBoxFor(m => m.RememberMe, new { @class = "form-check-input", id = "rememberMe" })
        <label class="form-check-label" for="rememberMe">Ghi nhớ đăng nhập</label>
      </div>
      <div class="d-grid mb-3">
        <button type="submit" class="btn btn-primary btn-lg">
          <i class="bi bi-box-arrow-in-right me-2"></i>Đăng nhập
        </button>
      </div>
    }
    <div class="text-center">
      <p class="mb-0">
        Chưa có tài khoản? 
        <a href="@Url.Action("Register","Auth", new { area = "Admin" })" class="text-decoration-none">Đăng ký ngay</a>
      </p>
    </div>
  </div>
</div>

@section Scripts {
    <script>
        function togglePassword(inputId, iconElement) {
            var input = document.getElementById(inputId);
            if (input.type === "password") {
                input.type = "text";
                iconElement.classList.remove("icon-eye");
                iconElement.classList.add("icon-eye-slash");
            } else {
                input.type = "password";
                iconElement.classList.remove("icon-eye-slash");
                iconElement.classList.add("icon-eye");
            }
        }
    </script>
}